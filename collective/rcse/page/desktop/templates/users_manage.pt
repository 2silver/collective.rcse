<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="collective.rcse">
  <head>
  <metal:block fill-slot="top_slot"
    tal:define="dummy python:request.set('disable_border',1);
                disable_column_one python:request.set('disable_plone.leftcolumn',1);
                disable_column_two python:request.set('disable_plone.rightcolumn',1);" />
  </head>

<body>
<div metal:fill-slot="main">

<ul class="nav nav-pills" i18n:domain="collective.rcse">
    <li>
        <a tal:attributes="href string:${context/absolute_url}/@@search"
            i18n:translate="">Search for contents
        </a>
    </li>
    <li class="active">
        <a tal:attributes="href string:${context/absolute_url}/users_directory"
           i18n:translate="">Search for users</a>
    </li>
    <li>
        <a tal:attributes="href string:${context/absolute_url}/companies_directory"
           i18n:translate="">Search for companies</a>
    </li>
</ul>


  <h1 i18n:translate="">Manage users</h1>
  <table cellpadding="0" cellspacing="0" border="0" id="members-datatable"
    width="100%" tal:define="members view/getUsersForms">
    <thead>
        <tr>
            <th i18n:translate="">Portrait</th>
            <th i18n:translate="">userid</th>
            <th i18n:translate="">Name</th>
            <th i18n:translate="">Function</th>
            <th i18n:translate="">Company</th>
            <th i18n:translate="">City</th>
            <th i18n:translate="">Actions</th>
        </tr>
    </thead>
    <tbody>
        <tal:members tal:repeat="member members">
            <tr>
                <td>
                    <a tal:attributes="href member/url"><img tal:attributes="src member/photo" width="40" /></a>
                </td>
                <td tal:condition="view/canManageUsers" tal:content="member/userid"></td>
                <td> <a tal:attributes="href member/url" tal:content="string:${member/first_name} ${member/last_name}"></a></td>
                <td tal:content="member/function"></td>
                <td tal:content="member/company"></td>
                <td tal:content="member/city"></td>
                <td>
                    <tal:with-form-as-view define="view nocall:member/form">
                        <metal:block use-macro="member/form/@@ploneform-macros/titlelessform" />
                    </tal:with-form-as-view>
                </td>
            </tr>
        </tal:members>
    </tbody>
</table>

</div>
</body>
</html>
