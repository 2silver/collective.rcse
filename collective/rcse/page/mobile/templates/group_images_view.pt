<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="collective.rcse">
<body>
  <div metal:fill-slot="content-core" class="directory-wrapper">

    <div id="image-view"
         tal:define="images python: view.get_content(batch=False, object=True)"
         tal:condition="python: len(images) > 0">
      <div id="image-show">
        <img src="" alt="" />
      </div>
      <div id="image-list">
        <ul data-role="listview">
        <tal:block tal:repeat="image images">
          <li>
            <img tal:define="scales image/@@images;
                             scale python: scales.scale('image', width=80, height=80);"
                 tal:replace="structure scale/tag" />
            <a class="image-link" href="#image-show"
               tal:define="scales image/@@images;
                           scale python: scales.scale('image', width=512, height=512);"
               tal:attributes="href scale/url"
               tal:content="image/title"></a>
          </li>
        </tal:block>
        </ul>
      </div>
      <script type="text/javascript">
        $(function(){
            $('#image-list li').click(function(event) {
                var src = $(this).find('.image-link').attr('href');
                var alt = $(this).find('.image-link').text();
                $('#image-show img').attr('src', src).attr('alt', alt);
                event.preventDefault();
                $('html,body').animate({scrollTop: $('#image-show').offset().top},'slow');
            })
        });
      </script>
    </div>
  </div>
</body>
</html>
